<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class CryptographyUtil | Glasgow </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class CryptographyUtil | Glasgow ">
      
      <meta name="description" content="Provides utility methods for cryptographic operations used throughout GlasgowDB, including secure key derivation from passwords or passphrases.">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/nthnn/Glasgow/new/main/apiSpec/new?filename=Glasgow_CryptographyUtil.md&amp;value=---%0Auid%3A%20Glasgow.CryptographyUtil%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="Glasgow">
            Glasgow
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="Glasgow.CryptographyUtil">



  <h1 id="Glasgow_CryptographyUtil" data-uid="Glasgow.CryptographyUtil" class="text-break">
Class CryptographyUtil  <a class="header-action link-secondary" title="View source" href="https://github.com/nthnn/Glasgow/blob/main/Glasgow/Glasgow.CryptographyUtil.cs/#L43"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="Glasgow.html">Glasgow</a></dd></dl>
  <dl><dt>Assembly</dt><dd>Glasgow.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Provides utility methods for cryptographic operations used throughout GlasgowDB,
including secure key derivation from passwords or passphrases.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public class CryptographyUtil</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">CryptographyUtil</span></div>
    </dd>
  </dl>



  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>




  <h2 id="Glasgow_CryptographyUtil_remarks">Remarks</h2>
  <div class="markdown level0 remarks"><p>
This class is intended to centralize cryptographic routines such as PBKDF2-based
key derivation, ensuring consistent parameters (iteration count, hash algorithm)
across the application. All methods are static, as they do not maintain internal state.
</p>
<p>
<strong>Security Considerations:</strong>
<ul><li>
    Always use a sufficiently random, unique salt when deriving keys. Reusing salts
    across different data or users can weaken security by making pre-computation attacks easier.
  </li><li>
    The iteration count (100,000) strikes a balance between performance and security as of 2025.
    Adjust upward if hardware allows, to increase resistance against brute-force attacks.
  </li><li>
    The derived key length is fixed at 32 bytes (256 bits), suitable for AES-256.
    If a different cipher or key size is required, consider exposing a parameter to change output length.
  </li><li>
    PBKDF2 with HMAC-SHA256 is widely supported and considered secure for password-based key derivation.
    However, if future requirements demand a memory-hard function (e.g., Argon2), this utility should be updated.
  </li></ul>

</div>


  <h2 class="section" id="methods">Methods
</h2>


  <a id="Glasgow_CryptographyUtil_DeriveKey_" data-uid="Glasgow.CryptographyUtil.DeriveKey*"></a>

  <h3 id="Glasgow_CryptographyUtil_DeriveKey_System_String_System_Byte___" data-uid="Glasgow.CryptographyUtil.DeriveKey(System.String,System.Byte[])">
  DeriveKey(string, byte[])
  <a class="header-action link-secondary" title="View source" href="https://github.com/nthnn/Glasgow/blob/main/Glasgow/Glasgow.CryptographyUtil.cs/#L103"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Derives a 256-bit (32-byte) symmetric encryption key from the provided passphrase and salt,
using the PBKDF2 (Password-Based Key Derivation Function 2) algorithm (RFC 2898) with HMAC-SHA256
and 100,000 iterations.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static byte[] DeriveKey(string PassKey, byte[] Salt)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>PassKey</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The user-supplied passphrase or password from which to derive the key. This should be a strong,
high-entropy string (e.g., a randomly generated password or user-provided phrase). Using weak or
guessable passphrases can severely reduce the security of the derived key.</p>
</dd>
    <dt><code>Salt</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.byte">byte</a>[]</dt>
    <dd><p>A cryptographic salt value, represented as a byte array. The salt must be at least 16 bytes long
and should be generated using a secure random number generator (e.g., <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.security.cryptography.randomnumbergenerator">RandomNumberGenerator</a>).
Each distinct usage (e.g., per encrypted database file or per user) should employ a unique, unpredictable salt.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.byte">byte</a>[]</dt>
    <dd><p>A byte array of length 32, containing the derived 256-bit key. This key is suitable for use with
AES-256 or other symmetric encryption algorithms requiring a 32-byte key.</p>
</dd>
  </dl>







  <h4 class="section" id="Glasgow_CryptographyUtil_DeriveKey_System_String_System_Byte____remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
<strong>Algorithm Details:</strong>
<ul><li>
    Instantiates an <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.security.cryptography.rfc2898derivebytes">Rfc2898DeriveBytes</a> (PBKDF2) object with:
    <ol><li>The provided <code class="paramref">PassKey</code> as the password.</li><li>The provided <code class="paramref">Salt</code> as the salt.</li><li>An iteration count of 100,000, meaning the HMAC-SHA256 function is applied repeatedly
          100,000 times to slow down brute-force attacks.</li><li>The underlying hash algorithm <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.security.cryptography.hashalgorithmname.sha256">SHA256</a>.</li></ol>
  </li><li>
    Calls <code>GetBytes(32)</code> to produce a 32-byte key derived from the passphrase and salt.
  </li><li>
    Disposes the <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.security.cryptography.rfc2898derivebytes">Rfc2898DeriveBytes</a> instance immediately after key extraction,
    ensuring no sensitive data lingers in memory longer than necessary.
  </li></ul>

<p>
<strong>Performance and Security Tradeoff:</strong> The iteration count (100,000) is chosen to be
sufficiently high to deter brute-force attacks while still allowing reasonably fast key derivation
on modern hardware. If low-latency is critical and hardware is less capable, consider lowering
the iteration count (at the cost of reduced security). Conversely, if your threat model demands
stronger resistance, increase the iteration count or switch to a memory-hard KDF.
</p>
<p>
<strong>Error Handling:</strong> This method throws an <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a> if either
<code class="paramref">PassKey</code> or <code class="paramref">Salt</code> is null. If <code class="paramref">Salt</code> is empty
or poorly random, the derived key may be less secure.
</p>
</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>Thrown if <code class="paramref">PassKey</code> or <code class="paramref">Salt</code> is null.</p>
</dd>
  </dl>




</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/nthnn/Glasgow/blob/main/Glasgow/Glasgow.CryptographyUtil.cs/#L43" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
